(this.webpackJsonprefill_rjs=this.webpackJsonprefill_rjs||[]).push([[13],{135:function(e,a,t){"use strict";t.r(a);var r=t(1),s=t(6),n=t(9),o=t(17),c=t(16),l=t(18),i=t(2),d=t.n(i),m=t(35),u=t(7),p=t.n(u),f=t(11),b=t(27),g=t(3),h=t(0),_=t(23),v=function(e){return function(a,t){try{var r=t()[h.W][h.T],s=Object.assign(r,e);a(E(s))}catch(n){g.a.log("Update UI Constraints ===> error ",n)}}},E=function(e){return function(a,t){try{var r=t()[h.W][h.T];a({type:h.X,payload:Object.assign(r,e)})}catch(s){g.a.log("Update Login State ===> error ",s)}}},w=t(20),O=t(28),N=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(t=Object(o.a)(this,(e=Object(c.a)(a)).call.apply(e,[this].concat(l)))).componentDidMount=function(){t.init()},t.init=function(){(0,t.props.updateSystemData)(Object(r.a)({},h.pd,"Refill | Change Password"))},t.submit=function(e){e.preventDefault();var a=t.props,s=a.old_password,n=a.password,o=a.confirm_password,c=a.updateUIConstraints,l=a.loading,i=a.changePassword;if(!l){var d={old_password:s,password:n,confirm_password:o};_.a.validate(Object.keys(d),d).then(function(e){var a=e.status,t=e.response;a?(c(Object(r.a)({},h.O,[])),i()):c(Object(r.a)({},h.O,t&&t.length?t:[]))}).catch(function(e){return console.log(e)})}},t.isError=function(e){var a=t.props.errors;return a&&a.length&&a.findIndex(function(a){return a.fieldName===e})>-1?{status:!0,message:a[a.findIndex(function(a){return a.fieldName===e})].message}:{status:!1,message:""}},t.onChangeText=function(e,a){(0,t.props.updateFormData)(Object(r.a)({},e,a))},t.componentDidUpdate=function(e){var a=t.props,r=a.reqeustStatus,s=(a.loading,a.navigation,e&&e.reqeustStatus?e.reqeustStatus:{});if(r[h.fd]!==s[h.fd])switch(r[h.fd]){case h.md:w.ToastsStore.success("Password successfully changed.");break;case h.Tb:switch(r[h.Dc]&&r[h.Dc].message?r[h.Dc].message:null){case h.Vc:w.ToastsStore.error("No Record Found.");break;case h.sd:w.ToastsStore.error("User token is not available.")}}},t._handleErrorMessage=function(e){var a=t.isError(e);return a&&a.status?d.a.createElement("span",{className:"form-text text-right text-error"},a.message):d.a.createElement("div",null)},t}return Object(l.a)(a,e),Object(n.a)(a,[{key:"render",value:function(){var e=this,a=this.props.loading;return d.a.createElement("div",{className:"kt-content  kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor",id:"kt_content"},d.a.createElement(w.ToastsContainer,{store:w.ToastsStore,lightBackground:!0,position:w.ToastsContainerPosition.TOP_RIGHT}),d.a.createElement("div",{className:"kt-subheader   kt-grid__item",id:"kt_subheader"},d.a.createElement("div",{className:"kt-container  kt-container--fluid "},d.a.createElement("div",{className:"kt-subheader__main"},d.a.createElement("h3",{className:"kt-subheader__title"},"Profile "),d.a.createElement("span",{className:"kt-subheader__separator kt-hidden"}),d.a.createElement("div",{className:"kt-subheader__breadcrumbs"},d.a.createElement("a",{href:"#",className:"kt-subheader__breadcrumbs-home"},d.a.createElement("i",{className:"flaticon2-shelter"})),d.a.createElement("span",{className:"kt-subheader__breadcrumbs-separator"}),d.a.createElement("a",{href:"",className:"kt-subheader__breadcrumbs-link"},"Change Password "))))),d.a.createElement("div",{className:"kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-12"},d.a.createElement("div",{className:"kt-portlet"},d.a.createElement("div",{className:"kt-portlet__head"},d.a.createElement("div",{className:"kt-portlet__head-label"},d.a.createElement("h3",{className:"kt-portlet__head-title"},"Change Password"))),d.a.createElement("form",{className:"kt-form kt-form--label-right",id:"kt_form_1",onSubmit:this.submit.bind(this)},d.a.createElement("div",{className:"kt-portlet__body"},d.a.createElement("div",{className:"form-group form-group-last kt-hide"},d.a.createElement("div",{className:"alert alert-danger",role:"alert",id:"kt_form_1_msg"},d.a.createElement("div",{className:"alert-icon"},d.a.createElement("i",{className:"flaticon-warning"})),d.a.createElement("div",{className:"alert-text"},"Oh snap! Change a few things up and try submitting again."),d.a.createElement("div",{className:"alert-close"},d.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},d.a.createElement("span",{"aria-hidden":"true"},d.a.createElement("i",{className:"la la-close"})))))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-form-label col-lg-3 col-sm-12"},"Old Password *"),d.a.createElement("div",{className:"col-lg-9 col-md-9 col-sm-12"},d.a.createElement("input",{type:"password",className:"form-control",name:"old_password",onChange:function(a){return e.onChangeText(h.R,a.target.value)},placeholder:"Enter old password"}),this._handleErrorMessage("old_password"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-form-label col-lg-3 col-sm-12"},"New Password *"),d.a.createElement("div",{className:"col-lg-9 col-md-9 col-sm-12"},d.a.createElement("input",{type:"password",className:"form-control",name:"password",onChange:function(a){return e.onChangeText(h.S,a.target.value)},placeholder:"Enter new password"}),this._handleErrorMessage("password"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-form-label col-lg-3 col-sm-12"},"Confirm Password *"),d.a.createElement("div",{className:"col-lg-9 col-md-9 col-sm-12"},d.a.createElement("input",{type:"password",className:"form-control",name:"confirm_password",onChange:function(a){return e.onChangeText(h.Q,a.target.value)},placeholder:"Enter confirm password"}),this._handleErrorMessage("confirm_password")))),d.a.createElement("div",{className:"kt-portlet__foot"},d.a.createElement("div",{className:"kt-form__actions"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-9 ml-lg-auto"},d.a.createElement("button",{type:"submit",className:"btn btn-brand"},a?"Loading...":"Submit")))))))))))}}]),a}(i.PureComponent);a.default=Object(m.b)(function(e){var a=e.change_password,t=a&&a[h.T]?a[h.T]:void 0,r=t&&t[h.P]?t[h.P]:void 0,s=r&&r[h.R]?r[h.R]:void 0,n=r&&r[h.S]?r[h.S]:void 0;return{old_password:s,confirm_password:r&&r[h.Q]?r[h.Q]:void 0,password:n,errors:t&&t[h.O]?t[h.O]:[],loading:!(!t||!t[h.U])&&t[h.U],reqeustStatus:t&&t[h.V]?t[h.V]:{}}},{updateFormData:function(e){return function(a,t){try{var s=t()[h.W][h.T],n=Object.assign(s[h.P],e);a(E(Object.assign(s,Object(r.a)({},h.P,n))))}catch(o){g.a.log("Update Form Data ===> error ",o)}}},updateUIConstraints:v,changePassword:function(){return function(e,a){try{var t,s,n,o,c=a()[h.W][h.T][h.P],l=a()[h.vd][h.ud],i=l&&l[h.td]&&l[h.td].user_token?l[h.td].user_token:void 0;if(!i)return void e(v((o={},Object(r.a)(o,h.V,(n={},Object(r.a)(n,h.fd,h.Ob),Object(r.a)(n,h.Dc,{message:h.sd}),n)),Object(r.a)(o,h.U,!1),o)));e(v((s={},Object(r.a)(s,h.V,(t={},Object(r.a)(t,h.fd,h.Ob),Object(r.a)(t,h.Dc,""),t)),Object(r.a)(s,h.U,!0),s)));var d={user_token:i,old_password:c[h.R],password:c[h.S],confirm_password:c[h.Q]};console.log("body ===> user_token",d),Object(b.j)(d).then(function(){var a=Object(f.a)(p.a.mark(function a(t){var s,n,o,c;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:g.a.log("Refill Change Password Response ===> ",t),t&&200===t.status?e(v((n={},Object(r.a)(n,h.V,(s={},Object(r.a)(s,h.fd,h.md),Object(r.a)(s,h.Dc,t),s)),Object(r.a)(n,h.U,!1),n))):e(v((c={},Object(r.a)(c,h.V,(o={},Object(r.a)(o,h.fd,h.Tb),Object(r.a)(o,h.Dc,t),o)),Object(r.a)(c,h.U,!1),c)));case 2:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()).catch(function(a){var t,s;g.a.log("Refill Change Password ===> error",a),e(v((s={},Object(r.a)(s,h.V,(t={},Object(r.a)(t,h.fd,h.Tb),Object(r.a)(t,h.Dc,""),t)),Object(r.a)(s,h.U,!1),s)))})}catch(_){var m,u;g.a.log("Refill Change Password ===> error",_),e(v((u={},Object(r.a)(u,h.V,(m={},Object(r.a)(m,h.fd,h.Tb),Object(r.a)(m,h.Dc,""),m)),Object(r.a)(u,h.U,!1),u)))}}},updateSystemData:O.a})(N)}}]);
//# sourceMappingURL=13.a480786d.chunk.js.map