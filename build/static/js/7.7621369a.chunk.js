(this.webpackJsonprefill_rjs=this.webpackJsonprefill_rjs||[]).push([[7],{117:function(e,t,a){"use strict";var l=a(6),r=a(9),o=a(17),n=a(16),c=a(18),i=a(2),s=a.n(i),d=(a(116),a(27)),m=a(35),u=a(0),g=(a(115),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(n.a)(t).call(this,e))).componentDidMount=function(){a.init(),a.getCategoryData()},a.getCategoryData=function(){var e=a.props,t=e.category_id,l=e.sub_category_id,r=e.type,o=e.user_token,n=a.state.value;"edit"!==r||!o||n&&n.name||Object(d.u)({user_token:o,category_id:t,sub_category_id:l}).then(function(e){console.log("getCategoryData ===> sub category",t,l),e.message===u.Xc&&(a.setState({value:e.data}),a.init())}).catch(function(e){a.init()})},a.init=function(){a.initSelectUI()},a.initSelectUI=function(){var e=this.props,t=e.user_token,a=e.handleOnChangeCategory,l=e._id,r=this;window.$&&window.$("#".concat(l)).select2({placeholder:"Search for category",allowClear:!0,ajax:{url:Object(d.f)(),delay:250,headers:{Authorization:Object(d.a)()},data:function(e){return{search:e.term?e.term:"",page:e.page?e.page:1,page_size:10,user_token:t,category_id:r.props.category_id}},processResults:function(e,t){return t.page=t.page||1,{results:e&&e.data&&e.data.items&&e.data.items.length?e.data.items.map(function(e){return e._id&&(e.id=e._id),e}):[],pagination:{more:!!(e&&e.data&&e.data.hasMore)&&e.data.hasMore}}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:1,templateResult:function(e){return e.loading?e.text:"<div className='select2-result-repository clearfix'><div className='select2-result-repository__meta'><div className='select2-result-repository__title'>"+e.name+"</div>"},templateSelection:function(e){var t=r.state.value;return e._id&&a&&a(e._id),e.name||t.name||e.text}})},a.resetCategorySelect=function(){var e=a.props._id;window.$("#".concat(e)).val(null).trigger("change")},a.componentDidUpdate=function(e){var t=a.props,l=t.addProductReqeustStatus,r=(t.sub_category_id,e&&e.addProductReqeustStatus?e.addProductReqeustStatus:{});if(l[u.fd]!==r[u.fd])switch(l[u.fd]){case u.md:a.resetCategorySelect()}},a.state={value:{id:void 0,name:void 0}},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.error_label,a=e.label,l=e._id;return s.a.createElement("div",{className:"form-group row"},s.a.createElement("label",{className:"col-form-label col-lg-3 col-sm-12"},a),s.a.createElement("div",{className:" col-lg-9 col-md-9 col-sm-12",id:"kt_select2_category_list_container"},s.a.createElement("select",{className:"form-control kt-select2",id:l,name:"param"},s.a.createElement("option",null)),t))}}]),t}(i.PureComponent));t.a=Object(m.b)(function(e){var t=e.user,a=e.product,l=t&&t[u.ud]?t[u.ud]:void 0,r=!!(l&&l[u.td]&&l[u.td].user_token)&&l[u.td].user_token,o=a&&a[u.Ec]?a[u.I]:void 0;return{user_token:r,addProductReqeustStatus:o&&o[u.D]?o[u.D]:{}}})(g)},127:function(e,t,a){"use strict";a.r(t);var l=a(1),r=a(6),o=a(9),n=a(17),c=a(16),i=a(18),s=a(2),d=a.n(s),m=a(35),u=a(28),g=a(0),p=a(115),b=a(23),_=a(118),h=(a(27),a(117)),f=a(3),E=a(20),v=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(c.a)(t).call(this,e))).componentDidMount=function(){a.init()},a.initForm=function(){var e=a.props,t=e.location,r=e.updateEditProductFormData,o=e.getProductViaID,n=t&&t.pathname&&t.pathname.split("edit/").length?t.pathname.split("edit/")[1]:"";r(Object(l.a)({},g.xb,n)),o()},a.init=function(){var e,t=a.props.updateSystemData;e=window.KTUtil.isRTL()?{leftArrow:'<i className="la la-angle-right"></i>',rightArrow:'<i className="la la-angle-left"></i>'}:{leftArrow:'<i className="la la-angle-left"></i>',rightArrow:'<i className="la la-angle-right"></i>'},window.$("#product_mfg_date").datepicker({rtl:window.KTUtil.isRTL(),todayHighlight:!0,orientation:"bottom left",templates:e}).on("changeDate",function(e){console.log("data ===> mfg",new Date(e.date))}),window.$("#product_expiry_date").datepicker({rtl:window.KTUtil.isRTL(),todayHighlight:!0,orientation:"bottom left",templates:e}),t(Object(l.a)({},g.pd,"Refill | Edit Product"))},a.submit=function(e){e.preventDefault();var t=a.props,r=t.name,o=t.short_description,n=t.long_description,c=t.brand,i=t.distributor,s=t.delivery_time_in_days,d=t.retail_price,m=t.refill_price,u=t.discount,p=t.notes,_=t.alert,h=t.quantity,f=t.weight,E=t.size,v=t.units,N=t.average_life_in_days,y=t.mfg_date,x=t.expiry_date,w=t.code,k=t.pup_gtin_code,C=t.category_id,D=t.sub_category_id,T=t.images,M=t.loading,P=t.image_uploading,O=t.image_uploading_count,j=t.uploaded_images,S=t.updateProductUIConstraints,z=t.editProduct;if(!M&&!P){var U={name:r,short_description:o,long_description:n,brand:c,distributor:i,delivery_time_in_days:s,retail_price:d,refill_price:m,discount:u,notes:p,alert:_,quantity:h,weight:f,size:E,units:v,average_life_in_days:N,mfg_date:y,expiry_date:x,code:w,pup_gtin_code:k,category_id:C,sub_category_id:D,images:T};b.a.validate(Object.keys(U),U).then(function(e){var t=e.status,a=e.response;t?(S(Object(l.a)({},g.ib,[])),T&&T.length>0&&O===T.length?j&&j.length===T.length&&(console.log("Update product ===> while all uploaded"),z()):S(Object(l.a)({},g.Kb,!0))):S(Object(l.a)({},g.ib,a&&a.length?a:[]))}).catch(function(e){return console.log(e)})}},a.isError=function(e){var t=a.props.errors;return t&&t.length&&t.findIndex(function(t){return t.fieldName===e})>-1?{status:!0,message:t[t.findIndex(function(t){return t.fieldName===e})].message}:{status:!1,message:""}},a.onChangeText=function(e,t){(0,a.props.updateEditProductFormData)(Object(l.a)({},e,t))},a.componentDidUpdate=function(e){var t=a.props,r=t.reqeustStatus,o=t.images,n=t.uploaded_images,c=t.image_uploading_count,i=t.updateProductUIConstraints,s=t.editProduct,d=(t.image_uploading,t.history,e&&e.reqeustStatus?e.reqeustStatus:{});if(r[g.fd]!==d[g.fd])switch(r[g.fd]){case g.md:E.ToastsStore.success("Product has been updated successfully");break;case g.Tb:var m=r[g.Dc]&&r[g.Dc].status?r[g.Dc].status:500,u=r[g.Dc]&&r[g.Dc].status&&r[g.Dc].emptyKeys&&r[g.Dc].emptyKeys.message?r[g.Dc].emptyKeys.message:[];switch(m){case 422:var p=u&&u.length?u.map(function(e){return{fieldName:e.fieldName,message:"Required data in ".concat(e.type,".")}}):[];i(Object(l.a)({},g.ib,p)),E.ToastsStore.error("Validation Error",2e3)}}c!==e.image_uploading_count&&o&&c===o.length&&n&&n.length===o.length&&(f.a.log("edit upload image end"),i(Object(l.a)({},g.Kb,!1)),console.log("UPDATE product ===> while uploading end"),s())},a._handleErrorMessage=function(e){var t=a.isError(e);return t&&t.status?d.a.createElement("span",{className:"form-text text-error text-right"},t.message):d.a.createElement("div",null)},a.componentWillUnmount=function(){a.resetProductData()},a.resetProductData=function(){(0,a.props.resetProductState)()},a.initForm(),a}return Object(i.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.name,l=t.short_description,r=t.long_description,o=t.brand,n=t.distributor,c=t.delivery_time_in_days,i=t.retail_price,s=t.refill_price,m=t.discount,u=t.notes,p=t.alert,b=t.quantity,f=t.weight,E=t.units,v=t.average_life_in_days,N=t.mfg_date,y=t.expiry_date,x=t.code,w=t.size,k=t.pup_gtin_code,C=t.category_id,D=t.sub_category_id,T=t.loading,M=t.image_uploading;return d.a.createElement("div",{className:"kt-content  kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor",id:"kt_content"},d.a.createElement("div",{className:"kt-subheader   kt-grid__item",id:"kt_subheader"},d.a.createElement("div",{className:"kt-container  kt-container--fluid "},d.a.createElement("div",{className:"kt-subheader__main"},d.a.createElement("h3",{className:"kt-subheader__title"},"Product "),d.a.createElement("span",{className:"kt-subheader__separator kt-hidden"}),d.a.createElement("div",{className:"kt-subheader__breadcrumbs"},d.a.createElement("a",{href:"#",className:"kt-subheader__breadcrumbs-home"},d.a.createElement("i",{className:"flaticon2-shelter"})),d.a.createElement("span",{className:"kt-subheader__breadcrumbs-separator"}),d.a.createElement("a",{href:"",className:"kt-subheader__breadcrumbs-link"},"Edit "))))),d.a.createElement("div",{className:"kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid"},d.a.createElement("div",{className:"kt-portlet"},d.a.createElement("div",{className:"kt-portlet__body kt-portlet__body--fit"},d.a.createElement("div",{className:"kt-grid  kt-wizard-v1 kt-wizard-v1--white",id:"kt_contacts_add","data-ktwizard-state":"step-first"},d.a.createElement("div",{className:"kt-grid__item kt-grid__item--fluid kt-wizard-v1__wrapper"},d.a.createElement("form",{className:"kt-form",onSubmit:this.submit.bind(this)},d.a.createElement("div",{className:"kt-wizard-v1__content","data-ktwizard-type":"step-content","data-ktwizard-state":"current"},d.a.createElement("div",{className:"kt-heading kt-heading--md"},"Products Details:"),d.a.createElement("div",{className:"kt-section kt-section--first"},d.a.createElement("div",{className:"kt-wizard-v1__form"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-xl-12"},d.a.createElement("div",{className:"kt-section__body"},d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Image"),d.a.createElement(_.c,{error_label:this._handleErrorMessage("images")})),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Name*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter product name",onChange:function(t){return e.onChangeText(g.vb,t.target.value)},value:a}),this._handleErrorMessage("name"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Short Description*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("textarea",{className:"form-control",id:"exampleTextarea",rows:"3",placeholder:"Enter short description",onChange:function(t){return e.onChangeText(g.Cb,t.target.value)},value:l}),this._handleErrorMessage("short_description"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Long Description*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("textarea",{className:"form-control",id:"exampleTextarea",rows:"3",placeholder:"Enter long description",onChange:function(t){return e.onChangeText(g.tb,t.target.value)},value:r}),this._handleErrorMessage("long_description"))),d.a.createElement(_.f,{error_label:this._handleErrorMessage("category_id"),handleOnChangeCategory:function(t){return e.onChangeText(g.nb,t)},label:"Category",type:"edit",category_id:C,_id:"product_category_list"}),C?d.a.createElement(h.a,{error_label:this._handleErrorMessage("sub_category_id"),handleOnChangeCategory:function(t){return e.onChangeText(g.Eb,t)},label:"Sub Category",category_id:C,type:"edit",sub_category_id:D,_id:"product_sub_category_list"}):null,d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Brand*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter brand",onChange:function(t){return e.onChangeText(g.mb,t.target.value)},value:o}),this._handleErrorMessage("brand"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Distributor*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter distributor",onChange:function(t){return e.onChangeText(g.rb,t.target.value)},value:n}),this._handleErrorMessage("distributor"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Delivery Time in Days*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter delivery time in days",onChange:function(t){return e.onChangeText(g.pb,t.target.value)},value:c}),this._handleErrorMessage("delivery_time_in_days"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Retail Price*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter retail price",onChange:function(t){return e.onChangeText(g.Bb,t.target.value)},value:i}),this._handleErrorMessage("retail_price"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Refill Price*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter refill price",onChange:function(t){return e.onChangeText(g.Ab,t.target.value)},value:s}),this._handleErrorMessage("refill_price"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Discount*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter discount",onChange:function(t){return e.onChangeText(g.qb,t.target.value)},value:m}),this._handleErrorMessage("discount"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Notes*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("textarea",{className:"form-control",id:"exampleTextarea",rows:"3",placeholder:"Enter notes",onChange:function(t){return e.onChangeText(g.wb,t.target.value)},value:u}),this._handleErrorMessage("notes"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Alert*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("textarea",{className:"form-control",id:"exampleTextarea",rows:"3",placeholder:"Enter alerts",onChange:function(t){return e.onChangeText(g.kb,t.target.value)},value:p}),this._handleErrorMessage("alert"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Quantity*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter quantity",onChange:function(t){return e.onChangeText(g.zb,t.target.value)},value:b}),this._handleErrorMessage("quantity"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Size*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter size",onChange:function(t){return e.onChangeText(g.Db,t.target.value)},value:w}),this._handleErrorMessage("size"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Weight*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter weight",onChange:function(t){return e.onChangeText(g.Hb,t.target.value)},value:f}),this._handleErrorMessage("weight"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Units*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("select",{className:"form-control","aria-invalid":"false",onChange:function(t){return e.onChangeText(g.Fb,t.target.value)},value:E},d.a.createElement("option",null,"Select Unit..."),d.a.createElement("option",{value:"ounce"},"ounce"),d.a.createElement("option",{value:"litter"},"litter"),d.a.createElement("option",{value:"gm"},"gm"),d.a.createElement("option",{value:"kg"},"kg")),this._handleErrorMessage("units"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Average Life in Days*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter average life in days",onChange:function(t){return e.onChangeText(g.lb,t.target.value)},value:v}),this._handleErrorMessage("average_life_in_days"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Mfg Date*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement(_.e,{_id:"product_mfg_date",placeholder:"Select mfg date",handleOnChange:function(t){return e.onChangeText(g.ub,t)},value:N,calendarOptions:{rtl:window.KTUtil.isRTL(),todayHighlight:!0,orientation:"bottom left",endDate:new Date}}),this._handleErrorMessage("mfg_date"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Expiry Date*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement(_.e,{_id:"product_expiry_date",placeholder:"Select expiry date",handleOnChange:function(t){return e.onChangeText(g.sb,t)},value:y,calendarOptions:{rtl:window.KTUtil.isRTL(),todayHighlight:!0,orientation:"bottom left",startDate:new Date}}),this._handleErrorMessage("expiry_date"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"Code*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter code",onChange:function(t){return e.onChangeText(g.ob,t.target.value)},value:x}),this._handleErrorMessage("code"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-xl-3 col-lg-3 col-form-label"},"PUP/GTIN Code*"),d.a.createElement("div",{className:"col-lg-9 col-xl-9"},d.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter PUP/GTIN Code",onChange:function(t){return e.onChangeText(g.yb,t.target.value)},value:k}),this._handleErrorMessage("pup_gtin_code"))))))))),d.a.createElement("div",{className:"kt-form__actions"},d.a.createElement("button",{type:"submit",className:"btn btn-brand btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u"},M?"Uploading...":T?"Loading...":"Submit")))))))))}}]),t}(s.PureComponent);t.default=Object(m.b)(function(e){var t=e.product,a=t&&t[g.Ec]?t[g.Ec]:void 0,l=a&&a[g.jb]?a[g.jb]:void 0,r=l&&l[g.vb]?l[g.vb]:"",o=l&&l[g.Cb]?l[g.Cb]:"",n=l&&l[g.tb]?l[g.tb]:"",c=l&&l[g.mb]?l[g.mb]:"",i=l&&l[g.rb]?l[g.rb]:"",s=l&&l[g.pb]?l[g.pb]:"",d=l&&l[g.Bb]?l[g.Bb]:"",m=l&&l[g.Ab]?l[g.Ab]:"",u=l&&l[g.qb]?l[g.qb]:"",p=l&&l[g.wb]?l[g.wb]:"",b=l&&l[g.kb]?l[g.kb]:"",_=l&&l[g.zb]?l[g.zb]:"",h=l&&l[g.Hb]?l[g.Hb]:"",f=l&&l[g.Db]?l[g.Db]:"",E=l&&l[g.Fb]?l[g.Fb]:"",v=l&&l[g.lb]?l[g.lb]:"",N=l&&l[g.ub]?l[g.ub]:"",y=l&&l[g.sb]?l[g.sb]:"",x=l&&l[g.ob]?l[g.ob]:"",w=l&&l[g.yb]?l[g.yb]:"",k=l&&l[g.nb]?l[g.nb]:"",C=l&&l[g.Eb]?l[g.Eb]:"",D=l&&l[g.Gb]&&l[g.Gb].length?l[g.Gb]:void 0,T=a&&a[g.ib]?a[g.ib]:[],M=!(!a||!a[g.Lb])&&a[g.Lb],P=a&&a[g.Mb]?a[g.Mb]:{},O=a&&a[g.Jb]&&a[g.Jb].length?a[g.Jb]:void 0,j=a&&a[g.Nb]?a[g.Nb]:0,S=!(!a||!a[g.Kb])&&a[g.Kb];return console.log("data ===> ",t),{name:r,short_description:o,long_description:n,brand:c,distributor:i,delivery_time_in_days:s,retail_price:d,refill_price:m,discount:u,notes:p,alert:b,quantity:_,weight:h,size:f,units:E,average_life_in_days:v,mfg_date:N,expiry_date:y,code:x,pup_gtin_code:w,category_id:k,sub_category_id:C,uploaded_images:D,errors:T,loading:M,reqeustStatus:P,images:O,images_length:O&&O.length?O.length:0,uploaded_images_length:D&&D?D.length:0,image_uploading_count:j,image_uploading:S}},{updateProductUIConstraints:p.i,updateEditProductFormData:p.h,updateSystemData:u.a,resetProductState:p.e,editProduct:p.c,getProductViaID:p.d})(v)}}]);
//# sourceMappingURL=7.7621369a.chunk.js.map