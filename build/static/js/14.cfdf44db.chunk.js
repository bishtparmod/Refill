(this.webpackJsonprefill_rjs=this.webpackJsonprefill_rjs||[]).push([[14],{133:function(e,t,a){"use strict";a.r(t);var r=a(1),s=a(6),c=a(9),n=a(17),o=a(16),i=a(18),l=a(2),d=a.n(l),u=a(35),m=a(7),p=a.n(m),f=a(11),b=a(27),g=a(3),v=a(0),O=function(e){return function(t,a){try{var r=a()[v.Rc][v.Nc],s=Object.assign(r,e);t(h(s))}catch(c){g.a.log("Update UI Constraints ===> error ",c)}}},h=function(e){return function(t,a){try{var r=a()[v.Rc][v.Nc];t({type:v.Sc,payload:Object.assign(r,e)})}catch(s){g.a.log("Update Login State ===> error ",s)}}},_=a(23),j=a(120),w=function(e){return function(t,a){try{var r=a()[v.nc][v.lc];t({type:v.oc,payload:Object.assign(r,e)})}catch(s){g.a.log("Update Header State ===> error ",s)}}},N=function(e){return function(t,a){try{var r=a()[v.Zb][v.Yb];t({type:v.ac,payload:Object.assign(r,e)})}catch(s){g.a.log("Update Footer State ===> error ",s)}}},E=a(20),k=a(49),y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(n.a)(this,Object(o.a)(t).call(this,e))).componentDidMount=function(){a.props.is_reset_password===v.Y&&a._replacePage("/")},a._replacePage=function(e){var t=a.props.history;e&&t.replace(e)},a.componentWillUnmount=function(){a.showHeaderAndSidebar(),a.resetData()},a.hideHeaderAndSidebar=function(){var e=a.props,t=e.updateSidebarUIConstraints,s=e.updateHeaderUIConstraints,c=e.updateFooterUIConstraints;t(Object(r.a)({},v.Zc,!0)),s(Object(r.a)({},v.kc,!0)),c(Object(r.a)({},v.Xb,!0))},a.showHeaderAndSidebar=function(){var e=a.props,t=e.updateSidebarUIConstraints,s=e.updateHeaderUIConstraints,c=e.updateFooterUIConstraints;t(Object(r.a)({},v.Zc,!1)),s(Object(r.a)({},v.kc,!1)),c(Object(r.a)({},v.Xb,!1))},a.submit=function(e){e.preventDefault();var t=a.props,s=t.password,c=t.confirm_password,n=t.updateUIConstraints,o=t.resetPassword;if(!t.loading){var i={password:s,confirm_password:c};_.a.validate(Object.keys(i),i).then(function(e){var t=e.status,a=e.response;t?(n(Object(r.a)({},v.Jc,[])),o()):n(Object(r.a)({},v.Jc,a&&a.length?a:[]))}).catch(function(e){return console.log(e)})}},a.isError=function(e){var t=a.props.errors;return t&&t.length&&t.findIndex(function(t){return t.fieldName===e})>-1?{status:!0,message:t[t.findIndex(function(t){return t.fieldName===e})].message}:{status:!1,message:""}},a.onChangeText=function(e,t){(0,a.props.updateFormData)(Object(r.a)({},e,t))},a.componentDidUpdate=function(e){var t=a.props,r=t.reqeustStatus,s=(t.loading,t.navigation,t.sessionLogin),c=a.props.is_reset_password;c!==e.is_reset_password&&(alert("reset password"+c),c===v.Y&&a._replacePage("/"));var n=e&&e.reqeustStatus?e.reqeustStatus:{};if(r[v.fd]!==n[v.fd])switch(r[v.fd]){case v.md:E.ToastsStore.success("Password changed successfully."),s();break;case v.Tb:switch(r[v.Dc]&&r[v.Dc].message?r[v.Dc].message:null){case v.Vc:E.ToastsStore.error("No Record Found.");break;case v.sd:E.ToastsStore.error("User token is not available.")}}},a._handleErrorMessage=function(e){var t=a.isError(e);return t&&t.status?d.a.createElement("span",{className:"form-text text-right text-error"},t.message):d.a.createElement("div",null)},a.resetData=function(){(0,a.props.resetResetDataState)()},a.hideHeaderAndSidebar(),a}return Object(i.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.loading;return d.a.createElement("div",{className:"kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor",id:"kt_content"},d.a.createElement("div",{className:"kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"offset-lg-2 col-lg-8"},d.a.createElement("div",{className:"kt-portlet"},d.a.createElement("div",{className:"kt-portlet__head"},d.a.createElement("div",{className:"kt-portlet__head-label"},d.a.createElement("h3",{className:"kt-portlet__head-title"},"Reset Password"))),d.a.createElement("form",{className:"kt-form kt-form--label-right",id:"kt_form_1",onSubmit:this.submit.bind(this)},d.a.createElement("div",{className:"kt-portlet__body"},d.a.createElement("div",{className:"form-group form-group-last kt-hide"},d.a.createElement("div",{className:"alert alert-danger",role:"alert",id:"kt_form_1_msg"},d.a.createElement("div",{className:"alert-icon"},d.a.createElement("i",{className:"flaticon-warning"})),d.a.createElement("div",{className:"alert-text"},"Oh snap! Change a few things up and try submitting again."),d.a.createElement("div",{className:"alert-close"},d.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},d.a.createElement("span",{"aria-hidden":"true"},d.a.createElement("i",{className:"la la-close"})))))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-form-label col-lg-3 col-sm-12"},"New Password *"),d.a.createElement("div",{className:"col-lg-9 col-md-9 col-sm-12"},d.a.createElement("input",{type:"password",className:"form-control",name:"password",onChange:function(t){return e.onChangeText(v.Mc,t.target.value)},placeholder:"Enter new password"}),this._handleErrorMessage("password"))),d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-form-label col-lg-3 col-sm-12"},"Confirm Password *"),d.a.createElement("div",{className:"col-lg-9 col-md-9 col-sm-12"},d.a.createElement("input",{type:"password",className:"form-control",name:"confirm_password",onChange:function(t){return e.onChangeText(v.Lc,t.target.value)},placeholder:"Enter confirm password"}),this._handleErrorMessage("confirm_password")))),d.a.createElement("div",{className:"kt-portlet__foot"},d.a.createElement("div",{className:"kt-form__actions"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-9 ml-lg-auto"},d.a.createElement("button",{type:"submit",className:"btn btn-brand"},t?"Loading...":"Submit")))))))))))}}]),t}(l.PureComponent);t.default=Object(u.b)(function(e){var t=e.reset_password,a=e.user,r=t&&t[v.Nc]?t[v.Nc]:void 0,s=r&&r[v.Kc]?r[v.Kc]:void 0,c=s&&s[v.Mc]?s[v.Mc]:void 0,n=s&&s[v.Lc]?s[v.Lc]:void 0,o=r&&r[v.Jc]?r[v.Jc]:[],i=!(!r||!r[v.Oc])&&r[v.Oc],l=r&&r[v.Pc]?r[v.Pc]:{},d=a&&a[v.ud]?a[v.ud]:void 0,u=d&&d[v.td]&&d[v.td].reset_password?d[v.td].reset_password:0;return console.log("errors ===> forgot password",o),{password:c,confirm_password:n,errors:o,loading:i,reqeustStatus:l,is_reset_password:u}},{updateFormData:function(e){return function(t,a){try{var s=a()[v.Rc][v.Nc],c=Object.assign(s[v.Kc],e);t(h(Object.assign(s,Object(r.a)({},v.Kc,c))))}catch(n){g.a.log("Update Form Data ===> error ",n)}}},updateUIConstraints:O,updateSidebarUIConstraints:j.a,updateHeaderUIConstraints:function(e){return function(t,a){try{var r=a()[v.nc][v.lc],s=Object.assign(r,e);t(w(s))}catch(c){g.a.log("Update Header UI Constraints ===> error ",c)}}},updateFooterUIConstraints:function(e){return function(t,a){try{var r=a()[v.Zb][v.Yb],s=Object.assign(r,e);t(N(s))}catch(c){g.a.log("Update Footer UI Constraints ===> error ",c)}}},sessionLogin:k.d,resetPassword:function(){return function(e,t){try{var a,s,c,n,o=t()[v.Rc][v.Nc][v.Kc],i=t()[v.vd][v.ud],l=i&&i[v.td]&&i[v.td].user_token?i[v.td].user_token:void 0;if(!l)return void e(O((n={},Object(r.a)(n,v.Pc,(c={},Object(r.a)(c,v.fd,v.Ob),Object(r.a)(c,v.Dc,{message:v.sd}),c)),Object(r.a)(n,v.Oc,!1),n)));e(O((s={},Object(r.a)(s,v.Pc,(a={},Object(r.a)(a,v.fd,v.Ob),Object(r.a)(a,v.Dc,""),a)),Object(r.a)(s,v.Oc,!0),s)));var d={user_token:l,password:o[v.Mc],confirm_password:o[v.Lc]};console.log("reset password body ===> user_token",d),Object(b.y)(d).then(function(){var t=Object(f.a)(p.a.mark(function t(a){var s,c,n,o;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:g.a.log("Refill Reset Password Response ===> ",a),a&&200===a.status?e(O((c={},Object(r.a)(c,v.Pc,(s={},Object(r.a)(s,v.fd,v.md),Object(r.a)(s,v.Dc,a),s)),Object(r.a)(c,v.Oc,!1),c))):e(O((o={},Object(r.a)(o,v.Pc,(n={},Object(r.a)(n,v.fd,v.Tb),Object(r.a)(n,v.Dc,a),n)),Object(r.a)(o,v.Oc,!1),o)));case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){var a,s;g.a.log("Refill Reset Password ===> error",t),e(O((s={},Object(r.a)(s,v.Pc,(a={},Object(r.a)(a,v.fd,v.Tb),Object(r.a)(a,v.Dc,""),a)),Object(r.a)(s,v.Oc,!1),s)))})}catch(h){var u,m;g.a.log("Refill Reset Password ===> error",h),e(O((m={},Object(r.a)(m,v.Pc,(u={},Object(r.a)(u,v.fd,v.Tb),Object(r.a)(u,v.Dc,""),u)),Object(r.a)(m,v.Oc,!1),m)))}}},resetResetDataState:function(e){return function(e,t){try{e({type:v.Qc,payload:{}})}catch(a){g.a.log("Update Forgot State ===> error ",a)}}}})(y)}}]);
//# sourceMappingURL=14.cfdf44db.chunk.js.map